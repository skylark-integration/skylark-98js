/**
 * skylark-98js - A version of 98js.js that ported to running on skylarkjs
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-integration/skylark-98js/
 * @license MIT
 */
function parseINIString(t){var e={section:/^\s*\[\s*([^\]]*)\s*\]\s*$/,param:/^\s*([^=]+?)\s*=\s*(.*?)\s*$/,comment:/^\s*;.*$/},o={},n=null;return t.split(/[\r\n]+/).forEach(function(t){if(!e.comment.test(t))if(e.param.test(t)){var l=t.match(e.param);n?o[n][l[1]]=l[2]:o[l[1]]=l[2]}else if(e.section.test(t)){l=t.match(e.section);o[l[1]]={},n=l[1]}else 0==t.length&&n&&(n=null)}),o}function renderThemeGraphics(t){var e=e=>t.getPropertyValue?t.getPropertyValue(e):t[e],o=document.createElement("canvas");o.width=o.height=2;var n=o.getContext("2d");n.fillStyle=e("--ButtonFace"),n.fillRect(0,1,1,1),n.fillRect(1,0,1,1),n.fillStyle=e("--ButtonHilight"),n.fillRect(0,0,1,1),n.fillRect(1,1,1,1);var l=`url("${o.toDataURL()}")`,r=parseInt(e("--scrollbar-size"));isFinite(r)||(r=13);var i=r-4,a=Math.floor(.3*r);r<16&&r>13&&(a-=1);var h=2*a-1,s=document.createElement("canvas"),d=s.getContext("2d");s.width=h,s.height=a,d.fillStyle="white";for(let t=0;t<a;t+=1)for(let e=t;e<h-t;e+=1)d.fillRect(e,t,1,1);o.width=4*i,o.height=i;let f=0;for(let t=0;t<2;t+=1)for(let e=0;e<2;e+=1)n.save(),n.translate(f*i,0),n.translate(i/2,i/2),t&&n.rotate(-Math.PI/2),e&&n.scale(1,-1),n.translate(-i/2,-i/2),n.drawImage(s,~~(i/2-h/2),~~(i/2-a/2)),n.restore(),f+=1;n.save(),n.globalCompositeOperation="source-in",n.fillStyle=e("--ButtonText"),n.fillRect(0,0,o.width,o.height);var c=`url("${o.toDataURL()}")`;n.fillStyle=e("--GrayText"),n.fillRect(0,0,o.width,o.height);var v=`url("${o.toDataURL()}")`;n.fillStyle=e("--ButtonHilight"),n.fillRect(0,0,o.width,o.height);var u=`url("${o.toDataURL()}")`;function p(t,e){var o=32*(t=t),n=`<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="256px" height="256px" viewBox="0 0 256 256">\n\t\t\t${e.replace(/(d|x|y|width|height|stroke-width)="[^"]*"/g,t=>t.replace(/\d+/g,t=>32*t))}\n\t\t</svg>`;return`url("${`data:image/svg+xml,${encodeURIComponent(n)}`}") ${o} / ${t}px`}n.restore();var g=p(2,`\n\t\t<path d="M0 0h8v8h-8v-8z" fill="${e("--ButtonDkShadow")}"/>\n\t\t<path d="M1 1h6v6h-6v-6z" fill="${e("--ButtonShadow")}"/>\n\t\t<path d="M2 2h4v4h-4v-4z" fill="${e("--ButtonFace")}"/>\n\t`),m=p(2,`\n\t\t<path d="M0 0h8v8h-8v-8z" fill="${e("--ButtonDkShadow")}"/>\n\t\t<path d="M1 1h6v6h-6v-6z" fill="${e("--ButtonShadow")}"/>\n\t\t<path d="M2 2h4v4h-4v-4z" fill="${e("--ButtonFace")}"/>\n\t\t<rect x="0" y="0" width="8" height="8" stroke-width="2" stroke="${e("--WindowFrame")}" fill="none"/>\n\t`);return{"--checker":l,"--button-active-border-image":g,"--button-normal-border-image":p(2,`\n\t\t<path d="M0 0h7v1h-6v6h-1v-7z" fill="${e("--ButtonHilight")}"/>\n\t\t<path d="M7 0h1v8h-8v-1h7v-7z" fill="${e("--ButtonDkShadow")}"/>\n\t\t<path d="M1 1h5v1h-4v4h-1v-5z" fill="${e("--ButtonLight")}"/>\n\t\t<path d="M6 1h1v6h-6v-1h5v-5z" fill="${e("--ButtonShadow")}"/>\n\t\t<path d="M2 2h4v4h-4v-4z" fill="${e("--ButtonFace")}"/>\n\t`),"--inset-deep-border-image":p(2,`\n\t\t<path d="M0 0h7v1h-6v6h-1v-7z" fill="${e("--ButtonDkShadow")}"/>\n\t\t<path d="M7 0h1v8h-8v-1h7v-7z" fill="${e("--ButtonHilight")}"/>\n\t\t<path d="M1 1h5v1h-4v4h-1v-5z" fill="${e("--ButtonShadow")}"/>\n\t\t<path d="M6 1h1v6h-6v-1h5v-5z" fill="${e("--ButtonLight")}"/>\n\t\t<path d="M2 2h4v4h-4v-4z" fill="${e("--ButtonFace")}"/>\n\t`),"--button-default-border-image":p(3,`\n\t\t<path d="M0 0h8v8h-8v-8z" fill="${e("--ButtonDkShadow")}"/>\n\t\t<path d="M1 1h5v1h-4v4h-1v-5z" fill="${e("--ButtonHilight")}"/>\n\t\t<path d="M2 2h3v1h-2v2h-1v-3z" fill="${e("--ButtonLight")}"/>\n\t\t<path d="M5 2h1v4h-4v-1h3v-3z" fill="${e("--ButtonShadow")}"/>\n\t\t<path d="M3 3h2v2h-2v-2z" fill="${e("--ButtonFace")}"/>\n\t\t<rect x="0" y="0" width="8" height="8" stroke-width="2" stroke="${e("--WindowFrame")}" fill="none"/>\n\t`),"--button-default-active-border-image":m,"--scrollbar-arrows-ButtonText":c,"--scrollbar-arrows-GrayText":v,"--scrollbar-arrows-ButtonHilight":u,"--scrollbar-size":`${r}px`,"--scrollbar-button-inner-size":`${i}px`}}function parseThemeFileString(t){var e=parseINIString(t),o=e["Control Panel\\Colors"];if(!o)return alert("Invalid theme file, no [Control Panel\\Colors] section"),void console.log(e);for(var n in o)n.match(/\W/)?delete o[n]:o[n]=`rgb(${o[n].split(" ").join(", ")})`;var l={};for(var n in o)l[`--${n}`]=o[n];return l=Object.assign(renderThemeGraphics(l),l)}function applyCSSProperties(t,e={}){let o,n;"tagName"in e?(console.warn("deprecated: use options argument to applyCSSProperties, e.g. applyCSSProperties(cssProperties, { element: document.documentElement, recurseIntoIframes: true })"),o=e,n=!1):({element:o=document.documentElement,recurseIntoIframes:n=!1}=e);var l=e=>t.getPropertyValue?t.getPropertyValue(e):t[e];for(var r in t)o.style.setProperty(r,l(r));if(n)for(var i=o.querySelectorAll("iframe"),a=0;a<i.length;a++)try{applyCSSProperties(t,{element:i[a].contentDocument.documentElement,recurseIntoIframes:!0})}catch(t){}}function makeThemeCSSFile(t){var e="\n/* This is a generated file. */\n:root {\n";for(var o in t)e+=`\t${o}: ${t[o]};\n`;return e+="}\n"}function makeBlackToInsetFilter(){if(document.getElementById("os-gui-black-to-inset-filter"))return;$('\n\t\t<svg style="position: absolute; pointer-events: none; bottom: 100%;">\n\t\t\t<defs>\n\t\t\t\t<filter id="os-gui-black-to-inset-filter" x="0" y="0" width="1px" height="1px">\n\t\t\t\t\t<feColorMatrix\n\t\t\t\t\t\tin="SourceGraphic"\n\t\t\t\t\t\ttype="matrix"\n\t\t\t\t\t\tvalues="\n\t\t\t\t\t\t\t1 0 0 0 0\n\t\t\t\t\t\t\t0 1 0 0 0\n\t\t\t\t\t\t\t0 0 1 0 0\n\t\t\t\t\t\t\t-1000 -1000 -1000 1 0\n\t\t\t\t\t\t"\n\t\t\t\t\t\tresult="black-parts-isolated"\n\t\t\t\t\t/>\n\t\t\t\t\t<feFlood result="shadow-color" flood-color="var(--ButtonShadow)"/>\n\t\t\t\t\t<feFlood result="hilight-color" flood-color="var(--ButtonHilight)"/>\n\t\t\t\t\t<feOffset in="black-parts-isolated" dx="1" dy="1" result="offset"/>\n\t\t\t\t\t<feComposite in="hilight-color" in2="offset" operator="in" result="hilight-colored-offset"/>\n\t\t\t\t\t<feComposite in="shadow-color" in2="black-parts-isolated" operator="in" result="shadow-colored"/>\n\t\t\t\t\t<feMerge>\n\t\t\t\t\t\t<feMergeNode in="hilight-colored-offset"/>\n\t\t\t\t\t\t<feMergeNode in="shadow-colored"/>\n\t\t\t\t\t</feMerge>\n\t\t\t\t</filter>\n\t\t\t</defs>\n\t\t</svg>\n\t').appendTo("body")}
//# sourceMappingURL=../sourcemaps/os-gui/parse-theme.js.map
